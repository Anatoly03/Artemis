<div>
    <jhi-programming-exercise-update-wizard-info
        class="form-step"
        *ngIf="currentStep >= 1"
        [isImport]="isImport"
        [titleNamePattern]="titleNamePattern"
        [programmingExercise]="programmingExercise"
        [shortNamePattern]="shortNamePattern"
        [invalidRepositoryNamePattern]="invalidRepositoryNamePattern"
        [invalidDirectoryNamePattern]="invalidDirectoryNamePattern"
        [updateRepositoryName]="updateRepositoryName"
        [updateCheckoutDirectory]="updateCheckoutDirectory"
        [refreshAuxiliaryRepositoryChecks]="refreshAuxiliaryRepositoryChecks"
        [auxiliaryRepositoryDuplicateNames]="auxiliaryRepositoryDuplicateNames"
        [auxiliaryRepositoryDuplicateDirectories]="auxiliaryRepositoryDuplicateDirectories"
        [exerciseCategories]="exerciseCategories"
        [existingCategories]="existingCategories"
        [updateCategories]="updateCategories"
    ></jhi-programming-exercise-update-wizard-info>

    <jhi-programming-exercise-update-wizard-difficulty
        class="form-step"
        *ngIf="currentStep >= 2"
        [isImport]="isImport"
        [programmingExercise]="programmingExercise"
    ></jhi-programming-exercise-update-wizard-difficulty>

    <jhi-programming-exercise-update-wizard-language
        class="form-step"
        *ngIf="currentStep >= 3"
        [isImport]="isImport"
        [programmingExercise]="programmingExercise"
        [appNamePatternForSwift]="appNamePatternForSwift"
        [modePickerOptions]="modePickerOptions"
        [withDependencies]="withDependencies"
        [packageNameRequired]="packageNameRequired"
        [packageNamePattern]="packageNamePattern"
        [supportsJava]="supportsJava"
        [supportsPython]="supportsPython"
        [supportsC]="supportsC"
        [supportsHaskell]="supportsHaskell"
        [supportsKotlin]="supportsKotlin"
        [supportsVHDL]="supportsVHDL"
        [supportsAssembler]="supportsAssembler"
        [supportsSwift]="supportsSwift"
        [supportsOCaml]="supportsOCaml"
        [supportsEmpty]="supportsEmpty"
        [selectedProgrammingLanguage]="selectedProgrammingLanguage"
        [onProgrammingLanguageChange]="onProgrammingLanguageChange"
        [projectTypes]="projectTypes"
        [selectedProjectType]="selectedProjectType"
        [onProjectTypeChange]="onProjectTypeChange"
    ></jhi-programming-exercise-update-wizard-language>

    <jhi-programming-exercise-update-wizard-grading
        class="form-step"
        *ngIf="currentStep >= 4"
        [isImport]="isImport"
        [programmingExercise]="programmingExercise"
        [staticCodeAnalysisAllowed]="staticCodeAnalysisAllowed"
        [onStaticCodeAnalysisChanged]="onStaticCodeAnalysisChanged"
        [maxPenaltyPattern]="maxPenaltyPattern"
    ></jhi-programming-exercise-update-wizard-grading>

    <jhi-programming-exercise-update-wizard-problem
        class="form-step"
        *ngIf="currentStep >= 5"
        [isImport]="isImport"
        [programmingExercise]="programmingExercise"
        [problemStatementLoaded]="problemStatementLoaded"
        [templateParticipationResultLoaded]="templateParticipationResultLoaded"
        [hasUnsavedChanges]="hasUnsavedChanges"
        [rerenderSubject]="rerenderSubject"
        [sequentialTestRunsAllowed]="sequentialTestRunsAllowed"
        [checkoutSolutionRepositoryAllowed]="checkoutSolutionRepositoryAllowed"
        [validIdeSelection]="validIdeSelection"
        [inProductionEnvironment]="inProductionEnvironment"
        [recreateBuildPlans]="recreateBuildPlans"
        [onRecreateBuildPlanOrUpdateTemplateChange]="onRecreateBuildPlanOrUpdateTemplateChange"
        [updateTemplate]="updateTemplate"
    ></jhi-programming-exercise-update-wizard-problem>

    <!-- Bottom Navigation Bar -->
    <div class="d-flex align-items-center">
        <div class="me-3">
            <button type="button" id="back" [disabled]="isSaving" class="btn btn-secondary" (click)="toggleModeFunction()">
                <fa-icon [icon]="faHandShakeAngle"></fa-icon>&nbsp;<span jhiTranslate="artemisApp.programmingExercise.home.switchToTraditionalModeLabel"
                    >Switch to normal mode</span
                >
            </button>
        </div>
        <div class="flex-grow-1 d-flex justify-content-center">
            <div class="flex-grow-1 d-flex justify-content-space-between ms-5 me-5 code-hint-generation-wrapper">
                <jhi-programming-exercise-update-wizard-step
                    [currentlySelected]="isCurrent(1)"
                    [isPerformed]="isCompleted(1)"
                    [labelTranslationKey]="'artemisApp.programmingExercise.wizardMode.steps.generalInfoStepTitle'"
                ></jhi-programming-exercise-update-wizard-step>
                <div class="connector" [ngClass]="isCompleted(1) ? 'check' : 'unset'"></div>
                <jhi-programming-exercise-update-wizard-step
                    [currentlySelected]="isCurrent(2)"
                    [isPerformed]="isCompleted(2)"
                    [labelTranslationKey]="'artemisApp.programmingExercise.wizardMode.steps.difficultyStepTitle'"
                ></jhi-programming-exercise-update-wizard-step>
                <div class="connector" [ngClass]="isCompleted(2) ? 'check' : 'unset'"></div>
                <jhi-programming-exercise-update-wizard-step
                    [currentlySelected]="isCurrent(3)"
                    [isPerformed]="isCompleted(3)"
                    [labelTranslationKey]="'artemisApp.programmingExercise.wizardMode.steps.languageStepTitle'"
                ></jhi-programming-exercise-update-wizard-step>
                <div class="connector" [ngClass]="isCompleted(3) ? 'check' : 'unset'"></div>
                <jhi-programming-exercise-update-wizard-step
                    [currentlySelected]="isCurrent(4)"
                    [isPerformed]="isCompleted(4)"
                    [labelTranslationKey]="'artemisApp.programmingExercise.wizardMode.steps.gradingStepTitle'"
                ></jhi-programming-exercise-update-wizard-step>
                <div class="connector" [ngClass]="isCompleted(4) ? 'check' : 'unset'"></div>
                <jhi-programming-exercise-update-wizard-step
                    [currentlySelected]="isCurrent(5)"
                    [isPerformed]="isCompleted(5)"
                    [labelTranslationKey]="'artemisApp.programmingExercise.wizardMode.steps.problemStepTitle'"
                ></jhi-programming-exercise-update-wizard-step>
            </div>
        </div>
        <div class="ms-3">
            <button type="button" id="next" [disabled]="isSaving" class="btn btn-primary" (click)="nextStep()">
                <fa-icon [icon]="getNextIcon()"></fa-icon>&nbsp;<span [jhiTranslate]="getNextText()">Next</span>
            </button>
        </div>
    </div>
</div>
